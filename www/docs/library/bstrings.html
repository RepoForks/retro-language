<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title>bstrings'</title>
<style type="text/css">

body {
  font: 100% sans-serif;
  background: #ffffff;
  color: black;
  margin: 2em;
  padding: 0em 2em; }

p.topic-title {
  font-weight: bold; }

table.docinfo {
  text-align: left;
  margin: 2em 0em; }

a[href] {
  color: #436976;
  background-color: transparent; }

a.toc-backref {
  text-decoration: none; }

h1 a[href] {
  color: #003a6b;
  text-decoration: none;
  background-color: transparent; }

a.strong {
  font-weight: bold; }

img {
  margin: 0;
  border: 0; }

p {
  margin: 0.5em 0 1em 0;
  line-height: 1.5em; }

p a:visited {
  color: purple;
  background-color: transparent; }

p a:active {
  color: red;
  background-color: transparent; }

a:hover {
  text-decoration: none; }

p img {
  border: 0;
  margin: 0; }

p.rubric {
  font-weight: bold;
  font-style: italic; }

h1.title {
  color: #003a6b;
  font-size: 250%;
  margin-bottom: 0em; }

h2.subtitle {
  color: #003a6b;
  border-bottom: 0px; }

h1, h2, h3, h4, h5, h6 {
  color: #555;
  background-color: transparent;
  margin: 0em;
  padding-top: 0.5em; }

h1 {
  font-size: 160%;
  margin-bottom: 0.5em;
  border-bottom: 2px solid #aaa; }

h2 {
  font-size: 140%;
  margin-bottom: 0.5em;
  border-bottom: 1px solid #aaa; }

h3 {
  font-size: 130%;
  margin-bottom: 0.5em; }

h4 {
  font-size: 110%;
  font-weight: bold;
  margin-bottom: 0.5em; }

h5 {
  font-size: 105%;
  font-weight: bold;
  margin-bottom: 0.5em; }

h6 {
  font-size: 100%;
  font-weight: bold;
  margin-bottom: 0.5em; }

dt {
  font-style: italic; }

dd {
  margin-bottom: 1.5em; }

div.admonition, div.note, div.tip, div.caution, div.important {
  margin: 2em 2em;
  padding: 0em 1em;
  border-top: 1px solid #aaa;
  border-left: 1px solid #aaa;
  border-bottom: 2px solid #555;
  border-right: 2px solid #555; }

div.important {
  background: transparent url('../images/important.png') 10px 2px no-repeat; }

div.caution {
  background: transparent url('../images/caution.png') 10px 2px no-repeat; }

div.note {
  background: transparent url('../images/note.png') 10px 2px no-repeat; }

div.tip {
  background: transparent url('../images/tip.png') 10px 2px no-repeat; }

div.admonition-example {
  background: transparent url('../images/tip.png') 10px 2px no-repeat; }

div.admonition-critical-example {
  background: transparent url('../images/important.png') 10px 2px no-repeat; }

p.admonition-title {
  font-weight: bold;
  border-bottom: 1px solid #aaa;
  padding-left: 30px; }

table.docutils {
  text-align: left;
  border: 1px solid gray;
  border-collapse: collapse;
  width: 100%;
  margin: 1.5em 0em; }

table.docutils caption {
  font-style: italic; }

table.docutils td, table.docutils th {
  padding: 0.25em 0.5em; }

table.docutils th {
  background-color: #dddddd; }

div.sidebar {
  width: 33%;
  float: right;
  margin: 0em 2em;
  padding: 0em 1em;
  border-top: 1px solid #aaa;
  border-left: 1px solid #aaa;
  border-bottom: 2px solid #555;
  border-right: 2px solid #555; }

p.sidebar-title {
  margin-bottom: 0em;
  color: #003a6b;
  border-bottom: 1px solid #aaa;
  font-weight: bold; }

p.sidebar-subtitle {
  margin-top: 0em;
  font-style: italic;
  color: #003a6b; }

pre.literal-block {
  margin-left: 1em;
  margin-right: 1em;
  background: #dddddd; }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

td.label {
  width: 8%; }

table.corefunc td:nth-child(2n) { text-align: center; }
table.corefunc {
  text-align: left;
  border: 1px solid gray;
  border-collapse: collapse;
  width: 100%;
  margin: 1.5em 0em; }

table.corefunc caption {
  font-style: italic; }

table.corefunc td, table.corefunc th {
  padding: 0.25em 0.5em; }

table.corefunc th {
  background-color: #dddddd; }

</style>
</head>
<body>
<div class="document" id="bstrings">
<h1 class="title">bstrings'</h1>

<div class="section" id="overview">
<h1>Overview</h1>
<p>This library builds on the <em>byte addressing</em> vocabulary (<strong>bad'</strong>) to provide
support for creating and working with byte-packed strings.</p>
<p>Generally it's better to use the cell-based strings. They are larger in memory,
but much faster to work with. If space is critical though, this library can be
used to significantly reduce the memory consumed, at the cost of performance.</p>
<p>As an example of how this works, consider a simple string: &quot;This is a test.&quot;</p>
<pre class="literal-block">
&quot;This is a test.&quot;
</pre>
<p>Retro will create a string in memory that looks like:</p>
<pre class="literal-block">
0000 T
0001 h
0002 i
0003 s
0004 &lt;space&gt;
0005 i
0006 s
0007 &lt;space&gt;
0008 a
0009 &lt;space&gt;
0010 t
0011 e
0012 s
0013 t
0014 .
0015 &lt;terminator&gt;
</pre>
<p>So 16 cells used. If we byte pack this, it reduces considerably:</p>
<pre class="literal-block">
0000 This
0001  is
0002 a te
0003 st&lt;terminator&gt;
</pre>
<p>Down to four cells. It's a straightforward 4:1 reduction.</p>
</div>
<div class="section" id="terminology">
<h1>Terminology</h1>
<p><em>byte</em>: A unit of memory consisting of eight bits.</p>
<p><em>cell</em>: A unit of memory consisting of thirty two bits.</p>
</div>
<div class="section" id="loading">
<h1>Loading</h1>
<pre class="literal-block">
needs bstrings'
</pre>
</div>
<div class="section" id="functions">
<h1>Functions</h1>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Stack</th>
<th class="head">Used For</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>pack</td>
<td>$-a</td>
<td>Convert a standard string into a byte packed
string</td>
</tr>
<tr><td>getLength</td>
<td>a-n</td>
<td>Return the length of a byte packed string (in
characters)</td>
</tr>
<tr><td>unpack</td>
<td>a-$</td>
<td>Convert a byte packed string into a standard
string</td>
</tr>
<tr><td>withLength</td>
<td>a-an</td>
<td>Return the length (in characters) and address
of a byte-packed string</td>
</tr>
<tr><td>puts</td>
<td>a-</td>
<td>Display a bye packed string</td>
</tr>
<tr><td>toLower</td>
<td>a-a</td>
<td>Convert a byte packed string to lowercase</td>
</tr>
<tr><td>toUpper</td>
<td>a-a</td>
<td>Convert a byte packed string to uppercase</td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
